{%- comment -%}
  Accepts

  image {Object} - Shopify Image object
  image_mobile {Object} - Shopify Image object
  sizes {String} - Defaults to 100vw
{%- endcomment -%}

<img
  srcset="{%- if image.width >= 375 -%}{{ image | image_url: width: 375 }} 375w,{%- endif -%}
  {%- if image.width >= 750 -%}{{ image | image_url: width: 750 }} 750w,{%- endif -%}
  {%- if image.width >= 1100 -%}{{ image | image_url: width: 1100 }} 1100w,{%- endif -%}
  {%- if image.width >= 1500 -%}{{ image | image_url: width: 1500 }} 1500w,{%- endif -%}
  {%- if image.width >= 1780 -%}{{ image | image_url: width: 1780 }} 1780w,{%- endif -%}
  {%- if image.width >= 2000 -%}{{ image | image_url: width: 2000 }} 2000w,{%- endif -%}
  {%- if image.width >= 2800 -%}{{ image | image_url: width: 2800 }} 2800w{%- endif -%}"
  sizes="{{- sizes | default: '100vw' -}}"
  src="{{ image | image_url: width: 750 }}"
  loading="lazy"
  alt="{{ image.alt | escape }}"
  width="{{ image.width }}"
  height="{{ image.height }}"
  {%- if image_mobile != blank -%}
    class="small-hide"
  {%- endif -%}
>

{%- if image_mobile != blank -%}
  {%- assign image_mobile_width = image_mobile_width | default: 750 -%}

  <img
    srcset="{%- if image_mobile.width >= 375 -%}{{ image_mobile | image_url: width: 375 }} 375w,{%- endif -%}
    {%- if image_mobile.width >= 750 -%}{{ image_mobile | image_url: width: 750 }} 750w,{%- endif -%}
    {%- if image_mobile.width >= 1100 -%}{{ image_mobile | image_url: width: 1100 }} 1100w,{%- endif -%}
    {%- if image_mobile.width >= 1500 -%}{{ image_mobile | image_url: width: 1500 }} 1500w,{%- endif -%}
    {%- if image_mobile.width >= 1780 -%}{{ image_mobile | image_url: width: 1780 }} 1780w,{%- endif -%}
    {%- if image_mobile.width >= 2000 -%}{{ image_mobile | image_url: width: 2000 }} 2000w,{%- endif -%}
    {%- if image_mobile.width >= 2800 -%}{{ image_mobile | image_url: width: 2800 }} 2800w{%- endif -%}"
    sizes="{{- sizes | default: '100vw' -}}"
    src="{{ image_mobile | image_url: width: image_mobile_width }}"
    loading="lazy"
    alt="{{ image_mobile.alt | escape }}"
    width="{{ image_mobile.width }}"
    height="{{ image_mobile.height }}"
    class="medium-hide large-up-hide"
  >
{%- endif -%}
